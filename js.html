<!DOCTYPE html>
<html>
<head>
    <title></title>
    <META http-equiv=Content-Type content="text/html; charset=utf-8">
    <script type="text/javascript" src="http://cdn.bootcss.com/jquery/1.11.2/jquery.min.js"></script>

    <style type="text/css">
    #clound {
        margin: 0 auto;
        width: 600px;
        position: relative;
        height: 400px;
    }
    #clound A {
        color: #777;
        font-weight: bold;
        text-decoration: none;
        font-family: Georgia, Arial;
        padding: 3px 6px;
        position: absolute;
        top: 0;
        left: 0;
    }
    #clound A:hover {
        color: white;
        background: #bbb;
        border: #eee 1px solid;
    }
    </style>
</head>
<body>
    <div id='clound'>
        <!-- <A style="FONT-SIZE: 18px" href="http://www.unityvc.com/portfolio.htm">暴雨游戏</A>
        <A style="FONT-SIZE: 19px" href="http://www.unityvc.com/portfolio.htm">亿思创世</A>
        <A style="FONT-SIZE: 20px" href="http://www.unityvc.com/portfolio.htm">灯鹭</A>
        <A style="FONT-SIZE: 21px" href="http://www.unityvc.com/portfolio.htm">AppleTreeBooks</A>
        <A style="FONT-SIZE: 22px" href="http://www.unityvc.com/portfolio.htm">易联致远</A>
        <A style="FONT-SIZE: 23px" href="http://www.unityvc.com/portfolio.htm">极阅</A>
        <A style="FONT-SIZE: 24px" href="http://www.unityvc.com/portfolio.htm">iTools</A>
        <A style="FONT-SIZE: 25px" href="http://www.unityvc.com/portfolio.htm">下厨房</A>
        <A style="FONT-SIZE: 26px" href="http://www.unityvc.com/portfolio.htm">豆果美食</A>
        <A style="FONT-SIZE: 27px" href="http://www.unityvc.com/portfolio.htm">美餐网</A>
        <A style="FONT-SIZE: 28px" href="http://www.unityvc.com/portfolio.htm">36氪</A>
        <A style="FONT-SIZE: 29px" href="http://www.unityvc.com/portfolio.htm">7k7k游戏</A>
        <A style="FONT-SIZE: 30px" href="http://www.unityvc.com/portfolio.htm">一听音乐网</A>
        <A style="FONT-SIZE: 17px" href="http://www.unityvc.com/portfolio.htm">堆糖</A>
        <A style="FONT-SIZE: 16px" href="http://www.unityvc.com/portfolio.htm">来来网</A>
        <A style="FONT-SIZE: 15px" href="http://www.unityvc.com/portfolio.htm">哇噻网</A>
        <A style="FONT-SIZE: 14px" href="http://www.unityvc.com/portfolio.htm">Masa Maso</A>
        <A style="FONT-SIZE: 12px" href="http://www.unityvc.com/portfolio.htm">米奇</A>
        <A style="FONT-SIZE: 18px" href="http://www.unityvc.com/portfolio.htm">蜜壳儿</A>
        <A style="FONT-SIZE: 26px" href="http://www.unityvc.com/portfolio.htm">锦食送</A>
        <A style="FONT-SIZE: 16px" href="http://www.unityvc.com/portfolio.htm">V电影</A>
        <A style="FONT-SIZE: 18px" href="http://www.unityvc.com/portfolio.htm">爱唱</A>
        <A style="FONT-SIZE: 22px" href="http://www.unityvc.com/portfolio.htm">果酷</A>
        <A style="FONT-SIZE: 20px" href="http://www.unityvc.com/portfolio.htm">苹果园</A>
        <A style="FONT-SIZE: 24px" href="http://www.unityvc.com/portfolio.htm">考拉迷你</A> -->
        <a style="FONT-SIZE: 18px" href="http://www.unityvc.com/portfolio.htm">小月</a>
        <a style="FONT-SIZE: 19px" href="http://www.unityvc.com/portfolio.htm">小毛</a>
        <a style="FONT-SIZE: 20px" href="http://www.unityvc.com/portfolio.htm">小敏</a>
        <a style="FONT-SIZE: 21px" href="http://www.unityvc.com/portfolio.htm">小婷</a>
        <a style="FONT-SIZE: 22px" href="http://www.unityvc.com/portfolio.htm">小瑶</a>
        <a style="FONT-SIZE: 18px" href="http://www.unityvc.com/portfolio.htm">小月</a>
        <a style="FONT-SIZE: 19px" href="http://www.unityvc.com/portfolio.htm">小毛</a>
        <a style="FONT-SIZE: 20px" href="http://www.unityvc.com/portfolio.htm">小敏</a>
        <a style="FONT-SIZE: 21px" href="http://www.unityvc.com/portfolio.htm">小婷</a>
        <a style="FONT-SIZE: 22px" href="http://www.unityvc.com/portfolio.htm">小瑶</a>
        <a style="FONT-SIZE: 18px" href="http://www.unityvc.com/portfolio.htm">小月</a>
        <a style="FONT-SIZE: 19px" href="http://www.unityvc.com/portfolio.htm">小毛</a>
        <a style="FONT-SIZE: 20px" href="http://www.unityvc.com/portfolio.htm">小敏</a>
        <a style="FONT-SIZE: 21px" href="http://www.unityvc.com/portfolio.htm">小婷</a>
        <a style="FONT-SIZE: 22px" href="http://www.unityvc.com/portfolio.htm">小瑶</a>
        <a style="FONT-SIZE: 18px" href="http://www.unityvc.com/portfolio.htm">小月</a>
        <a style="FONT-SIZE: 19px" href="http://www.unityvc.com/portfolio.htm">小毛</a>
        <a style="FONT-SIZE: 20px" href="http://www.unityvc.com/portfolio.htm">小敏</a>
        <a style="FONT-SIZE: 21px" href="http://www.unityvc.com/portfolio.htm">小婷</a>
        <a style="FONT-SIZE: 22px" href="http://www.unityvc.com/portfolio.htm">小瑶</a>
        <a style="FONT-SIZE: 18px" href="http://www.unityvc.com/portfolio.htm">小月</a>
        <a style="FONT-SIZE: 19px" href="http://www.unityvc.com/portfolio.htm">小毛</a>
        <a style="FONT-SIZE: 20px" href="http://www.unityvc.com/portfolio.htm">小敏</a>
        <a style="FONT-SIZE: 21px" href="http://www.unityvc.com/portfolio.htm">小婷</a>
        <a style="FONT-SIZE: 22px" href="http://www.unityvc.com/portfolio.htm">小瑶</a>
    </div>

    <script type="text/javascript">
    // http://analysis.lxn.com/lxn2.0.dev/Public/common/jquery-1.11.1.min.js
    // http://cdn.bootcss.com/jquery/1.11.2/jquery.min.js
    // 球体半径
    var radius = 140;
    // 1度角的弧度    三角函数算的是弧度不是角度
    var dtr = Math.PI / 180; // radian
    var d   = 200;

    var mcList    = [];
    var active    = false;
    var titleOver = false;
    var thisa     = 0;
    var thisb     = 0;
    var lasta     = 1;
    var lastb     = 1;
    var distr     = true;
    var tspeed    = 20;
    var size      = 200;

    var howElliptical = 1;

    var oA      = null;
    var oDiv    = null;

    $(function() {
        // 获取整个云所处div的对象
        oDiv = $('#clound')[0];
        // 获取云里每一个项的对象
        oA = $('#clound>a');

        var l = oDiv.offsetWidth / 2;
        var t = oDiv.offsetHeight / 2;
        // 每项的基本宽高，字体大小
        for (var i = 0; i < oA.length; i++) {
            var oTag = {};
            oTag.zerox = l - $(oA[i]).width() / 2;
            oTag.zeroy = t - $(oA[i]).height() / 2;

            oTag.scale      = 1;
            oTag.alpha      = 1;
            oTag.fontSize   = parseInt($(oA[i]).css('font-size'));
            mcList.push(oTag);
        }

        initPosition();
        $('div#clound').mouseover(function(){
            active = true;
        });
        $('div#clound').mouseout(function(){
            active = false;
        });
        $('div#clound>a').mouseover(function(){
            titleOver = true;
        });
        $('div#clound>a').mouseout(function(){
            titleOver = false;
        });
        $('div#clound').mousemove(function($e){
            $e.preventDefault();
            var mouseX = ($e.pageX - $('#clound').offset().left - $('#clound').width() / 2) / 5;
            var mouseY = ($e.pageY - $('#clound').offset().top - $('#clound').height() / 2) / 5;
            thisa = (-Math.min(Math.max(-mouseY, -size), size) / radius) * tspeed;
            thisb = (Math.min(Math.max(-mouseX, -size), size) / radius) * tspeed;
        });
        setInterval(update, 30);
    });

    function update() {
        if (titleOver) {
            lasta = lasta * 0.87;
            lastb = lastb * 0.87;
        } else if (active) {
            lasta = thisa;
            lastb = thisb;
        } else {
            lasta = lasta * 0.98;
            lastb = lastb * 0.98;
        }
    
        if (Math.abs(lasta) <= 0.01 && Math.abs(lastb) <= 0.01) {
            return;
        }

        // sineCosine(lasta, lastb, 0);
        var sineX   = Math.sin(lasta * dtr);
        var cosineX = Math.cos(lasta * dtr);
        var sineY   = Math.sin(lastb * dtr);
        var cosineY = Math.cos(lastb * dtr);
        var sineZ   = Math.sin(0 * dtr);
        var cosineZ = Math.cos(0 * dtr);

        for (var i = 0; i < mcList.length; i++) {
            // x 轴旋转
            var rx1 = mcList[i].cx;
            var ry1 = mcList[i].cy * cosineX - mcList[i].cz * sineX;
            var rz1 = mcList[i].cy * sineX + mcList[i].cz * cosineX;
            // y 轴旋转
            var rx2 = rx1 * cosineY + rz1 * sineY;
            var ry2 = ry1;
            var rz2 = rz1 * cosineY - rx1 * sineY;
            // z 轴旋转
            var rx3 = rx2 * cosineZ - ry2 * sineZ;
            var ry3 = rx2 * sineZ + ry2 * cosineZ;
            var rz3 = rz2;

            mcList[i].cx = rx3;
            mcList[i].cy = ry3;
            mcList[i].cz = rz3;

            var per = d / (d + rz3);

            // mcList[i].x = (howElliptical*rx3*per)-(howElliptical*2);
            // mcList[i].y = ry3*per;
            mcList[i].scale = per;
            mcList[i].alpha = per;
            mcList[i].alpha = (mcList[i].alpha - 0.6) * (10 / 6);
        }
        updatePosition();
    }

    // 初始化元素位置
    function initPosition() {
        var aTmp = [];
        // 使用createDocumentFragment函数创建一个文档碎片，最后一次性添加到document中
        var oFragment = document.createDocumentFragment();

        for (var i = 0; i < oA.length; i++) {
            aTmp.push(oA[i]);
        }
        
        aTmp.sort(function () {
            return Math.random()<0.5?1:-1;
        });

        for (var j = 0; j < aTmp.length; j++) {
            oFragment.appendChild(aTmp[j]);
        }
        // 一次性添加到document中
        oDiv.appendChild(oFragment);

        var theta, phi;
        var max = mcList.length;
        for (var k = 0; k < max; k++) {
            if (distr) {
                theta = Math.acos((2 * k + 1) / max - 1);
                // theta = Math.PI * (2 * k + 1) / max - Math.PI / max;
                // theta = k / max ;

                phi = Math.sqrt(max * Math.PI) * theta;
            } else {
                theta = Math.random() * (Math.PI);
                phi = Math.random() * (2 * Math.PI);
            }
            // 球坐标变换公式
            mcList[k].cx = radius * Math.cos(phi) * Math.sin(theta);
            mcList[k].cy = radius * Math.sin(phi) * Math.sin(theta);
            mcList[k].cz = radius * Math.cos(theta);
        }
        updatePosition();
    }

    function updatePosition() {
        for (var i = 0; i < mcList.length; i++) {
            oA[i].style.left     = mcList[i].cx + mcList[i].zerox + 'px';
            oA[i].style.top      = mcList[i].cy + mcList[i].zeroy + 'px';

            oA[i].style.fontSize = Math.ceil(mcList[i].scale * 6 + mcList[i].fontSize / 2.5) + 'px';

            oA[i].style.filter   = "alpha(opacity=" + 100 * mcList[i].alpha + ")";
            oA[i].style.opacity  = mcList[i].alpha;
        }
    }
    </script>
</body>
</html>